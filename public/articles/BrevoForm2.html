<!DOCTYPE html>
<html lang="en"><head>

<meta charset="utf-8"/>
<meta content="quarto-1.4.554" name="generator"/>

<meta content="width=device-width, initial-scale=1.0, user-scalable=yes" name="viewport"/>


<title>A Simpler Newsletter Form : Building The Form with HTMX</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="./quarto_files/libs/clipboard/clipboard.min.js" type="module"></script>
<script src="./quarto_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="./quarto_files/libs/quarto-html/popper.min.js" type="module"></script>
<script src="./quarto_files/libs/quarto-html/tippy.umd.min.js" type="module"></script>
<script src="./quarto_files/libs/quarto-html/anchor.min.js" type="module"></script>
<link href="./quarto_files/libs/quarto-html/tippy.css" rel="stylesheet"/>
<link href="./quarto_files/libs/quarto-html/quarto-syntax-highlighting.css" id="quarto-text-highlighting-styles" rel="stylesheet"/>





<link href="../img/favicon.ico" rel="icon" type="image/x-icon"/><link href="https://fonts.googleapis.com" rel="preconnect"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&amp;display=swap" rel="stylesheet"/><link as="font" crossorigin="anonymous" href="../fonts/LeMurmure-Regular.woff2" rel="preload" type="font/woff2"/><link href="../build/tailwind.css" rel="stylesheet"/><script>
                if (localStorage.getItem('dark-mode') === 'true' || (!('dark-mode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    document.querySelector('html').classList.add('dark');
                } else {
                    document.querySelector('html').classList.remove('dark');
                }
            </script><meta content="Today a blog post about '“How to show API results nicely and dynamically”'" name="description"/></head>

<body class="bg-gray-100 fullContent w-screen overflow-x-hidden bg-gray-100 font-body text-gray-900 dark:bg-gray-1000 dark:text-gray-200"><nav class="fixed isolate w-52 dark:w-56 z-50 m-0 p-4 text-xl lg:m-8">
			<a class="w-full border-b inline-block border-pink-800 bg-gray-200 px-1 pb-1 pt-2 not-italic lg:bg-transparent dark:border-0 dark:bg-pink-400 dark:text-gray-1000 dark:font-black" href="https://thomasdargent.com">Thomas Dargent</a>
			<button class="-rotate-1 rotate-1 shadow-md sm:hidden w-full bg-gray-100 border border-pink-950 text-center dark:bg-gray-900 dark:border-pink-600" id="show-btn" type="button">↧</button>
			<ul class="mt-4 *:bg-gray-200 *:lg:bg-transparent dark:*:bg-gray-1000 dark:border dark:border-pink-400 dark:[&amp;_li+li]:border-t dark:[&amp;_li+li]:border-pink-400 hidden sm:block text-base" id="menu">
				<li class="p-1">
					<a class="hover:ml-4 hover:text-pacific-blue-600 dark:hover:text-pink-400" href="https://thomasdargent.com/#portfolio">Portfolio</a>
				</li>
				<li class="p-1"><a class="hover:ml-4 hover:text-pacific-blue-600 dark:hover:text-pink-400" href="https://thomasdargent.com/#blog">Blog</a></li>
				<li class="p-1"><a class="hover:ml-4 hover:text-pacific-blue-600 dark:hover:text-pink-400" href="https://thomasdargent.com/#contact">Contact</a></li>
			</ul>
			<div class="flex flex-col justify-center mx-6 mt-2 items-center bg-gray-200 border border-pacific-blue-500 lg:border-0 dark:bg-gray-1000 lg:bg-transparent rounded-full dark:border dark:border-pink-600">
					<input class="sr-only" id="light-switch" name="light-switch" type="checkbox"/>
					<label class="relative cursor-pointer p-1 grid grid-cols-3" for="light-switch">
						<svg alt="Dark theme icon" aria-label="Switch to dark" class="dark:fill-gray-700 fill-pacific-blue-500 h-4 w-4 mt-1" role="img" viewBox="17.6262 123.819 352.1318 344.5168" xmlns="http://www.w3.org/2000/svg">
							<path d="M 205.513 205.745 C 268.065 204.767 287.003 164.344 287.789 123.819 C 287.499 164.344 301.297 205.092 369.758 205.178 C 298.116 205.93 287.767 247.714 288.352 288.239 C 288.781 247.714 268.065 203.606 205.513 205.745 Z"></path>
							<polygon points="314.275 232.401 322.389 251.392 341.325 259.057 330.842 241.397"></polygon>
							<polygon points="230.871 259.057 238.986 240.065 257.921 232.401 247.439 250.06" style="transform-origin: 244.396px 245.729px;" transform="matrix(-1, 0, 0, -1, 0, 0.000030517578)"></polygon>
							<polygon points="314.274 177.389 322.388 158.397 341.324 150.733 330.842 168.392"></polygon>
							<polygon points="230.871 150.733 238.986 169.724 257.92 177.389 247.439 159.729" style="transform-origin: 244.396px 164.061px;" transform="matrix(-1, 0, 0, -1, -0.000030517578, 0)"></polygon>
							<path d="M 162.82 155.163 C 112.361 251.928 90.773 398.67 321.209 399.04 C 141.603 595.849 -165.971 328.478 162.82 155.163 Z"></path>
						  </svg>
						  <div class="border-b border-pink-600 h-1/2 w-full"></div>
						<svg alt="Light theme icon" aria-label="Switch to light" class="dark:fill-[#FDD162] fill-gray-700 ml-2 h-6 w-6" role="img" viewBox="176.732 48.923 258.842 257.472" xmlns="http://www.w3.org/2000/svg">
							<path d="M 176.732 177.215 C 275.311 175.683 305.157 112.384 306.395 48.923 C 305.938 112.384 327.683 176.192 435.574 176.327 C 322.67 177.504 306.36 242.935 307.283 306.395 C 307.958 242.935 275.311 173.865 176.732 177.215 Z"></path>
							<polygon points="348.135 218.956 360.923 248.696 390.764 260.697 374.245 233.044"></polygon>
							<polygon points="216.696 260.697 229.484 230.957 259.325 218.956 242.806 246.609" style="transform-origin: 238.011px 239.826px;" transform="matrix(-1, 0, 0, -1, 0, 0.000030517578)"></polygon>
							<polygon points="348.134 132.81 360.922 103.07 390.763 91.069 374.244 118.722"></polygon>
							<polygon points="216.695 91.069 229.483 120.809 259.324 132.81 242.805 105.157" style="transform-origin: 238.01px 111.94px;" transform="matrix(-1, 0, 0, -1, 0, 0.000015258789)"></polygon>
						  </svg>
						<span class="sr-only">Switch to light / dark version</span>
					</label>
			</div>
		</nav>

<div class="px-6 pb-16 pt-48 sm:pt-16 lg:pt-16 sm:px-16 sm:pl-56 lg:pl-72 xl:pl-96" id="quarto-content">

<main class="content" id="quarto-document-content">

<header class="prose lg:prose-lg text-center font-normal" id="title-block-header">
<div class="quarto-title">
<h1 class="font-heading text-4xl !w-full max-w-[40rem] sm:text-6xl mb-12 mt-8 font-normal text-center dark:text-gray-100">A Simpler Newsletter Form : Building The Form with HTMX</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


<p class="prose lg:prose-lg text-xl !w-full max-w-[40rem] !mb-6 !mt-2 text-gray-900 dark:text-gray-200 text-center">— OR —</p><p class="prose lg:prose-lg text-lg !mb-16 !w-full max-w-[40rem] text-gray-900 dark:text-gray-200 text-center" role="doc-subtitle">“How to show API results nicely and dynamically”</p></header>



<section class="level2" id="introduction">
<h2 class="text-2xl sm:text-3xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-600 dark:text-pink-400" data-anchor-id="introduction">Introduction</h2>
<section class="level3" id="context">
<h3 class="text-lg sm:text-2xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="context">Context</h3>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">In the last tutorial we made a view to create contacts in a Brevo list. I will now show you how to integrate it with a webpage using HTMX. HTMX can be seen as a replacement to JQuery that is written in your HTML code. Despite being simple, it’s very powerful and can do a lot of things. I used it for a project and I fell in love like never before (sorry to my ex-partners). We will use it to send our post request to the view we created last time, and affect the DOM according to the results. I’m new to it so there might be things that could be done in a more idiomatic way.</p>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">The other nice framework I will use is TailwindCSS. In the same manner, it allows us to style elements directly in HTML. I’ve found it to be a much faster way to prototype, and a nice way to remember the attributes of an element. I will not explain everything except some patterns, but encourage you to check it out.</p>
</section>
<section class="level3" id="plan">
<h3 class="text-lg sm:text-2xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="plan">Plan</h3>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">First, a quick Tailwind tour, showing off some small useful patterns.. Then, we’ll get to HTMX to display a success icon if the contact was created. Finally, we will display the errors in the form, because the user need to know they messed up.</p>
</section>
</section>
<section class="level2" id="making-the-form">
<h2 class="text-2xl sm:text-3xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-600 dark:text-pink-400" data-anchor-id="making-the-form">Making the form</h2>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">I won’t go into many details as there is nothing really special here, just your average form doing an honest job. The HTML is pretty basic : make a form that contains labels linked to inputs, and a submit button. The inputs are mostly of type <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">text</code>. Don’t forget to set the mail one to <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">email</code>, you know, it’s nicer. I put my label+input into a div to style them together. Nothing more to say.</p>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Tailwind allow us to easily make a responsive form that looks nice. To do that, you add special class that are then parsed and added to your stylesheet by Tailwind. For example, <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">bg-gray-100</code> will be interpreted as :</p>
<div class="mb-4" id="cb1"><pre class="sourceCode css code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode css"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a><span class="fu">.bg-gray-100</span> {</span>
<span id="cb1-2"><a aria-hidden="true" href="#cb1-2" tabindex="-1"></a>    <span class="va">--tw-bg-opacity</span><span class="ch">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb1-3"><a aria-hidden="true" href="#cb1-3" tabindex="-1"></a>    <span class="kw">background-color</span><span class="ch">:</span> <span class="fu">rgb(</span><span class="dv">247</span> <span class="dv">246</span> <span class="dv">243</span> / <span class="fu">var(</span><span class="va">--tw-bg-opacity</span><span class="fu">))</span><span class="op">;</span></span>
<span id="cb1-4"><a aria-hidden="true" href="#cb1-4" tabindex="-1"></a>}</span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">With <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">gray-100</code> corresponding to a color in a <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">gray</code> palette I defined. <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">w-full</code> means that the <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">width</code> take a value of <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">100%</code>. Of course, I won’t explain everything here (even if reading the documentation together could be fun) but you can see how it’s way shorter than writing plain css.</p>
<section class="level3" id="demo">
<h3 class="text-lg sm:text-2xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="demo">Demo</h3>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">You can resize the width of the box to simulate responsiveness, and see my beautiful js in action.</p>
<div class="demo-container">
    <iframe class="demo" id="demo0" src="https://thomasdargent.com/api/brevo_form_example" title="Basic responsive form">
    </iframe>
    <div aria-hidden="true" class="resizer"></div>
</div>
</section>
<section class="level3" id="nice-to-know">
<h3 class="text-lg sm:text-2xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="nice-to-know">Nice to know</h3>
<section class="level4" id="responsiveness">
<h4 class="text-base sm:text-xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="responsiveness">Responsiveness</h4>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">The demo size on my website is very small (it’s a blog post, not designed to fill a full HD screen) so I had to tweak a few things to make sure it plays nice. Those wouldn’t be a problem normally (but might be of interest to you, especially if you want to copy the code):</p>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">First, I defined two new breakpoints, <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">xxsm</code> and <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">xsm</code> :</p>
<div class="mb-4" id="cb2"><pre class="sourceCode js code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode javascript"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb2-2"><a aria-hidden="true" href="#cb2-2" tabindex="-1"></a>  <span class="dt">content</span><span class="op">:</span> [<span class="st">'*.html'</span>]<span class="op">,</span></span>
<span id="cb2-3"><a aria-hidden="true" href="#cb2-3" tabindex="-1"></a>  <span class="dt">theme</span><span class="op">:</span> {</span>
<span id="cb2-4"><a aria-hidden="true" href="#cb2-4" tabindex="-1"></a>    <span class="dt">extend</span><span class="op">:</span> {</span>
<span id="cb2-5"><a aria-hidden="true" href="#cb2-5" tabindex="-1"></a>      <span class="dt">screens</span><span class="op">:</span> {</span>
<span id="cb2-6"><a aria-hidden="true" href="#cb2-6" tabindex="-1"></a>        <span class="st">'xxsm'</span><span class="op">:</span> <span class="st">'256px'</span><span class="op">,</span> <span class="co">// for a pre 2000 screen</span></span>
<span id="cb2-7"><a aria-hidden="true" href="#cb2-7" tabindex="-1"></a>        <span class="st">'xsm'</span><span class="op">:</span> <span class="st">'416px'</span><span class="op">,</span>  <span class="co">// for a more reasonable size</span></span>
<span id="cb2-8"><a aria-hidden="true" href="#cb2-8" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb2-9"><a aria-hidden="true" href="#cb2-9" tabindex="-1"></a>    }</span>
<span id="cb2-10"><a aria-hidden="true" href="#cb2-10" tabindex="-1"></a>  }<span class="op">,</span></span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Then I had to make sure that everything wouldn’t get too small by settings a min width to the <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">body</code> with <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">min-w-40</code>. Then I had to make sure that everything wouldn’t get too big with <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">w-full max-w-screen-sm mx-auto</code> on the main div. Then I had to… nope that’s all.</p>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">To collapse the names field when there isn’t enough room, I use this little grid pattern :</p>
<div class="mb-4" id="cb3"><pre class="sourceCode html code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode html"><span id="cb3-1"><a aria-hidden="true" href="#cb3-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"grid grid-cols-1 xsm:grid-cols-2 gap-4"</span><span class="dt">&gt;</span></span>
<span id="cb3-2"><a aria-hidden="true" href="#cb3-2" tabindex="-1"></a><span class="co">&lt;!-- The grid has one column on small size, and 2 otherwise. Notice I can use my custom breakpoint without issue--&gt;</span></span>
<span id="cb3-3"><a aria-hidden="true" href="#cb3-3" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-block w-full"</span><span class="dt">&gt;</span> </span>
<span id="cb3-4"><a aria-hidden="true" href="#cb3-4" tabindex="-1"></a>    <span class="co">&lt;!-- w-full to take the full size of the column--&gt;</span></span>
<span id="cb3-5"><a aria-hidden="true" href="#cb3-5" tabindex="-1"></a>        ...</span>
<span id="cb3-6"><a aria-hidden="true" href="#cb3-6" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb3-7"><a aria-hidden="true" href="#cb3-7" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-block w-full"</span><span class="dt">&gt;</span></span>
<span id="cb3-8"><a aria-hidden="true" href="#cb3-8" tabindex="-1"></a>        ...</span>
<span id="cb3-9"><a aria-hidden="true" href="#cb3-9" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb3-10"><a aria-hidden="true" href="#cb3-10" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Also remember that input field can have Regex pattern. Our email field, for example, uses one <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">pattern="^.+@.+\..+$"</code> that tells it to only accept email of form “something”@“something”.”something”. That should prevent a few typo/random input.</p>
</section>
</section>
<section class="level3" id="full-static-code">
<h3 class="text-lg sm:text-2xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="full-static-code">Full static code</h3>
<div class="mb-4" id="cb4"><pre class="sourceCode html code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode html"><span id="cb4-1"><a aria-hidden="true" href="#cb4-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="ot"> class</span><span class="op">=</span><span class="st">"bg-slate-100 w-full min-w-40 bg-gray-100 font-body text-gray-900"</span><span class="dt">&gt;</span></span>
<span id="cb4-2"><a aria-hidden="true" href="#cb4-2" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"w-full max-w-screen-sm mx-auto p-4"</span><span class="dt">&gt;</span></span>
<span id="cb4-3"><a aria-hidden="true" href="#cb4-3" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">h1</span></span>
<span id="cb4-4"><a aria-hidden="true" href="#cb4-4" tabindex="-1"></a><span class="ot">            class</span><span class="op">=</span><span class="st">"text-center text-xl text-pacific-blue-600"</span><span class="dt">&gt;</span></span>
<span id="cb4-5"><a aria-hidden="true" href="#cb4-5" tabindex="-1"></a>            Newsletter</span>
<span id="cb4-6"><a aria-hidden="true" href="#cb4-6" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb4-7"><a aria-hidden="true" href="#cb4-7" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> class</span><span class="op">=</span><span class="st">"text-center"</span><span class="dt">&gt;</span>Subscribe to follow our news<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb4-8"><a aria-hidden="true" href="#cb4-8" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> class</span><span class="op">=</span><span class="st">"pt-8"</span></span>
<span id="cb4-9"><a aria-hidden="true" href="#cb4-9" tabindex="-1"></a><span class="ot">            id</span><span class="op">=</span><span class="st">"newsletter-form"</span></span>
<span id="cb4-10"><a aria-hidden="true" href="#cb4-10" tabindex="-1"></a><span class="ot">            </span><span class="dt">&gt;</span></span>
<span id="cb4-11"><a aria-hidden="true" href="#cb4-11" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"mb-4"</span><span class="dt">&gt;</span></span>
<span id="cb4-12"><a aria-hidden="true" href="#cb4-12" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"form-email"</span><span class="ot"> class</span><span class="op">=</span><span class="st">"text-gray-700"</span></span>
<span id="cb4-13"><a aria-hidden="true" href="#cb4-13" tabindex="-1"></a><span class="ot">                </span><span class="dt">&gt;</span>E-mail address<span class="dt">&lt;/</span><span class="kw">label</span></span>
<span id="cb4-14"><a aria-hidden="true" href="#cb4-14" tabindex="-1"></a>            <span class="dt">&gt;</span></span>
<span id="cb4-15"><a aria-hidden="true" href="#cb4-15" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">input</span></span>
<span id="cb4-16"><a aria-hidden="true" href="#cb4-16" tabindex="-1"></a><span class="ot">                id</span><span class="op">=</span><span class="st">"form-email"</span></span>
<span id="cb4-17"><a aria-hidden="true" href="#cb4-17" tabindex="-1"></a><span class="ot">                name</span><span class="op">=</span><span class="st">"email"</span></span>
<span id="cb4-18"><a aria-hidden="true" href="#cb4-18" tabindex="-1"></a><span class="ot">                type</span><span class="op">=</span><span class="st">"email"</span></span>
<span id="cb4-19"><a aria-hidden="true" href="#cb4-19" tabindex="-1"></a><span class="ot">                pattern</span><span class="op">=</span><span class="st">"^.+@.+\..+$"</span></span>
<span id="cb4-20"><a aria-hidden="true" href="#cb4-20" tabindex="-1"></a><span class="ot">                placeholder</span><span class="op">=</span><span class="st">"jeandupont@mail.com"</span></span>
<span id="cb4-21"><a aria-hidden="true" href="#cb4-21" tabindex="-1"></a><span class="ot">                value</span><span class="op">=</span><span class="st">"a@a.fr"</span></span>
<span id="cb4-22"><a aria-hidden="true" href="#cb4-22" tabindex="-1"></a><span class="ot">                required</span></span>
<span id="cb4-23"><a aria-hidden="true" href="#cb4-23" tabindex="-1"></a><span class="ot">                class</span><span class="op">=</span><span class="st">"w-full focus:outline-none"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb4-24"><a aria-hidden="true" href="#cb4-24" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb4-25"><a aria-hidden="true" href="#cb4-25" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"grid grid-cols-1 xsm:grid-cols-2 gap-4"</span><span class="dt">&gt;</span></span>
<span id="cb4-26"><a aria-hidden="true" href="#cb4-26" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-block min-w-40 w-full"</span><span class="dt">&gt;</span></span>
<span id="cb4-27"><a aria-hidden="true" href="#cb4-27" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"form-prenom"</span><span class="ot"> class</span><span class="op">=</span><span class="st">"text-gray-700"</span></span>
<span id="cb4-28"><a aria-hidden="true" href="#cb4-28" tabindex="-1"></a><span class="ot">                </span><span class="dt">&gt;</span>First name<span class="dt">&lt;/</span><span class="kw">label</span></span>
<span id="cb4-29"><a aria-hidden="true" href="#cb4-29" tabindex="-1"></a>                <span class="dt">&gt;</span></span>
<span id="cb4-30"><a aria-hidden="true" href="#cb4-30" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">input</span></span>
<span id="cb4-31"><a aria-hidden="true" href="#cb4-31" tabindex="-1"></a><span class="ot">                id</span><span class="op">=</span><span class="st">"form-prenom"</span></span>
<span id="cb4-32"><a aria-hidden="true" href="#cb4-32" tabindex="-1"></a><span class="ot">                name</span><span class="op">=</span><span class="st">"first_name"</span></span>
<span id="cb4-33"><a aria-hidden="true" href="#cb4-33" tabindex="-1"></a><span class="ot">                type</span><span class="op">=</span><span class="st">"text"</span></span>
<span id="cb4-34"><a aria-hidden="true" href="#cb4-34" tabindex="-1"></a><span class="ot">                pattern</span><span class="op">=</span><span class="st">"[^\d]+"</span></span>
<span id="cb4-35"><a aria-hidden="true" href="#cb4-35" tabindex="-1"></a><span class="ot">                placeholder</span><span class="op">=</span><span class="st">"Jean"</span></span>
<span id="cb4-36"><a aria-hidden="true" href="#cb4-36" tabindex="-1"></a><span class="ot">                value</span><span class="op">=</span><span class="st">"Thomas"</span></span>
<span id="cb4-37"><a aria-hidden="true" href="#cb4-37" tabindex="-1"></a><span class="ot">                required</span></span>
<span id="cb4-38"><a aria-hidden="true" href="#cb4-38" tabindex="-1"></a><span class="ot">                class</span><span class="op">=</span><span class="st">"w-full focus:outline-none"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb4-39"><a aria-hidden="true" href="#cb4-39" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb4-40"><a aria-hidden="true" href="#cb4-40" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-block min-w-40 w-full"</span><span class="dt">&gt;</span></span>
<span id="cb4-41"><a aria-hidden="true" href="#cb4-41" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"form-nom"</span><span class="ot"> class</span><span class="op">=</span><span class="st">"text-gray-700"</span><span class="dt">&gt;</span>Last Name<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb4-42"><a aria-hidden="true" href="#cb4-42" tabindex="-1"></a>                <span class="dt">&lt;</span><span class="kw">input</span></span>
<span id="cb4-43"><a aria-hidden="true" href="#cb4-43" tabindex="-1"></a><span class="ot">                id</span><span class="op">=</span><span class="st">"form-nom"</span></span>
<span id="cb4-44"><a aria-hidden="true" href="#cb4-44" tabindex="-1"></a><span class="ot">                name</span><span class="op">=</span><span class="st">"last_name"</span></span>
<span id="cb4-45"><a aria-hidden="true" href="#cb4-45" tabindex="-1"></a><span class="ot">                type</span><span class="op">=</span><span class="st">"text"</span></span>
<span id="cb4-46"><a aria-hidden="true" href="#cb4-46" tabindex="-1"></a><span class="ot">                pattern</span><span class="op">=</span><span class="st">"[^\d]+"</span></span>
<span id="cb4-47"><a aria-hidden="true" href="#cb4-47" tabindex="-1"></a><span class="ot">                placeholder</span><span class="op">=</span><span class="st">"Dupont"</span></span>
<span id="cb4-48"><a aria-hidden="true" href="#cb4-48" tabindex="-1"></a><span class="ot">                value</span><span class="op">=</span><span class="st">"Dargent"</span></span>
<span id="cb4-49"><a aria-hidden="true" href="#cb4-49" tabindex="-1"></a><span class="ot">                required</span></span>
<span id="cb4-50"><a aria-hidden="true" href="#cb4-50" tabindex="-1"></a><span class="ot">                class</span><span class="op">=</span><span class="st">"w-full focus:outline-none"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb4-51"><a aria-hidden="true" href="#cb4-51" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb4-52"><a aria-hidden="true" href="#cb4-52" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb4-53"><a aria-hidden="true" href="#cb4-53" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"form-consent"</span><span class="ot"> class</span><span class="op">=</span><span class="st">"mt-8 inline-flex items-center"</span><span class="dt">&gt;</span></span>
<span id="cb4-54"><a aria-hidden="true" href="#cb4-54" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">input</span></span>
<span id="cb4-55"><a aria-hidden="true" href="#cb4-55" tabindex="-1"></a><span class="ot">                id</span><span class="op">=</span><span class="st">"form-consent"</span></span>
<span id="cb4-56"><a aria-hidden="true" href="#cb4-56" tabindex="-1"></a><span class="ot">                name</span><span class="op">=</span><span class="st">"form-consent"</span></span>
<span id="cb4-57"><a aria-hidden="true" href="#cb4-57" tabindex="-1"></a><span class="ot">                type</span><span class="op">=</span><span class="st">"checkbox"</span></span>
<span id="cb4-58"><a aria-hidden="true" href="#cb4-58" tabindex="-1"></a><span class="ot">                class</span><span class="op">=</span><span class="st">"m-4"</span><span class="ot"> required</span><span class="dt">/&gt;</span></span>
<span id="cb4-59"><a aria-hidden="true" href="#cb4-59" tabindex="-1"></a>            I agree to your legal documents bla bla bla.</span>
<span id="cb4-60"><a aria-hidden="true" href="#cb4-60" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb4-61"><a aria-hidden="true" href="#cb4-61" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">button</span></span>
<span id="cb4-62"><a aria-hidden="true" href="#cb4-62" tabindex="-1"></a><span class="ot">            type</span><span class="op">=</span><span class="st">"submit"</span></span>
<span id="cb4-63"><a aria-hidden="true" href="#cb4-63" tabindex="-1"></a><span class="ot">            class</span><span class="op">=</span><span class="st">"block mx-auto text-pacific-blue-100 bg-pacific-blue-900 p-4 hover:scale-110 hover:shadow-md"</span><span class="dt">&gt;</span></span>
<span id="cb4-64"><a aria-hidden="true" href="#cb4-64" tabindex="-1"></a>            Subscribe !</span>
<span id="cb4-65"><a aria-hidden="true" href="#cb4-65" tabindex="-1"></a>            <span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb4-66"><a aria-hidden="true" href="#cb4-66" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="cb4-67"><a aria-hidden="true" href="#cb4-67" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb4-68"><a aria-hidden="true" href="#cb4-68" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb4-69"><a aria-hidden="true" href="#cb4-69" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
</section>
</section>
<section class="level2" id="the-power-of-htmx">
<h2 class="text-2xl sm:text-3xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-600 dark:text-pink-400" data-anchor-id="the-power-of-htmx">The power of HTMX</h2>
<section class="level3" id="getting-the-api-results">
<h3 class="text-lg sm:text-2xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="getting-the-api-results">Getting the API results</h3>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Careful, it will be quick ! Don’t blink !</p>
<div class="mb-4" id="cb5"><pre class="sourceCode html code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode html"><span id="cb5-1"><a aria-hidden="true" href="#cb5-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> class</span><span class="op">=</span><span class="st">"pt-8"</span></span>
<span id="cb5-2"><a aria-hidden="true" href="#cb5-2" tabindex="-1"></a><span class="ot">    id</span><span class="op">=</span><span class="st">"newsletter-form"</span></span>
<span id="cb5-3"><a aria-hidden="true" href="#cb5-3" tabindex="-1"></a><span class="ot">    method</span><span class="op">=</span><span class="st">"post"</span></span>
<span id="cb5-4"><a aria-hidden="true" href="#cb5-4" tabindex="-1"></a><span class="ot">    hx-post</span><span class="op">=</span><span class="st">"{% url 'brevo_handler' %}"</span></span>
<span id="cb5-5"><a aria-hidden="true" href="#cb5-5" tabindex="-1"></a><span class="ot">    hx-target</span><span class="op">=</span><span class="st">"#newsletter-form"</span></span>
<span id="cb5-6"><a aria-hidden="true" href="#cb5-6" tabindex="-1"></a><span class="ot">    </span><span class="dt">&gt;</span></span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">There’s two new tags there : <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">hx-post</code> and <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">hx-target</code>. Let’s see what they do :</p>
<ul class="prose prose-stone dark:prose-invert !w-full max-w-[40em] mb-4 lg:max-w-[35em] marker:text-gray-700/60 dark:marker:text-gray-700/75 list-disc pl-8 lg:prose-lg">
<li><code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">hx-post</code> : You know when you use a submit button, the page reload. For small forms like this that might not be the sole content of the page, it’s a bad idea. This HTMX attribute catch the post request and send it to “brevo_handler” without reloading.</li>
<li><code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">hx-target</code> : Swap the target with the return of the api. In this case, it will replace the form with a success page. Wait. That means we have to define a success page ? …And we have to return it 😱 ?!</li>
</ul>
<section class="level4" id="returning-a-success-div">
<h4 class="text-base sm:text-xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="returning-a-success-div">Returning a success div</h4>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Ok, so first we need to return html code in our view. This is simple, instead of using a <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">HttpResponse</code> we use <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">render</code>.</p>
<div class="mb-4" id="cb6"><pre class="sourceCode python code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode python"><span id="cb6-1"><a aria-hidden="true" href="#cb6-1" tabindex="-1"></a><span class="co"># ...</span></span>
<span id="cb6-2"><a aria-hidden="true" href="#cb6-2" tabindex="-1"></a>response <span class="op">=</span> requests.post(BREVO_URL, json<span class="op">=</span>obj, headers<span class="op">=</span>headers)</span>
<span id="cb6-3"><a aria-hidden="true" href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a aria-hidden="true" href="#cb6-4" tabindex="-1"></a><span class="cf">if</span> response.status_code <span class="op">==</span> <span class="dv">201</span>:  <span class="co"># Success</span></span>
<span id="cb6-5"><a aria-hidden="true" href="#cb6-5" tabindex="-1"></a>    <span class="cf">return</span> render(request, <span class="st">"_success_newsletter.html"</span>)</span>
<span id="cb6-6"><a aria-hidden="true" href="#cb6-6" tabindex="-1"></a><span class="cf">else</span>:  </span>
<span id="cb6-7"><a aria-hidden="true" href="#cb6-7" tabindex="-1"></a>    <span class="co"># Handle Brevo API errors</span></span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Next we will design a small success page :</p>
<div class="mb-4" id="cb7"><pre class="sourceCode python code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode python"><span id="cb7-1"><a aria-hidden="true" href="#cb7-1" tabindex="-1"></a><span class="op">&lt;!</span>doctype html<span class="op">&gt;</span></span>
<span id="cb7-2"><a aria-hidden="true" href="#cb7-2" tabindex="-1"></a><span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">"text-gray-500 relative h-72 overflow-hidden pt-8"</span><span class="op">&gt;</span></span>
<span id="cb7-3"><a aria-hidden="true" href="#cb7-3" tabindex="-1"></a>    <span class="op">&lt;</span>h2 <span class="kw">class</span><span class="op">=</span><span class="st">"text-center text-lg text-pacific-blue-600"</span><span class="op">&gt;</span>Successfully subscribed <span class="op">!&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb7-4"><a aria-hidden="true" href="#cb7-4" tabindex="-1"></a>    <span class="op">&lt;</span>div</span>
<span id="cb7-5"><a aria-hidden="true" href="#cb7-5" tabindex="-1"></a>        <span class="bu">id</span><span class="op">=</span><span class="st">"checkmark"</span></span>
<span id="cb7-6"><a aria-hidden="true" href="#cb7-6" tabindex="-1"></a>        <span class="kw">class</span><span class="op">=</span><span class="st">"popping absolute mx-auto rounded-full bg-pacific-blue-500 text-pacific-blue-100"</span><span class="op">&gt;</span></span>
<span id="cb7-7"><a aria-hidden="true" href="#cb7-7" tabindex="-1"></a>        <span class="op">&lt;</span>svg</span>
<span id="cb7-8"><a aria-hidden="true" href="#cb7-8" tabindex="-1"></a>            <span class="kw">class</span><span class="op">=</span><span class="st">"stroke-pacific-blue-100"</span></span>
<span id="cb7-9"><a aria-hidden="true" href="#cb7-9" tabindex="-1"></a>            xmlns<span class="op">=</span><span class="st">"http://www.w3.org/2000/svg"</span></span>
<span id="cb7-10"><a aria-hidden="true" href="#cb7-10" tabindex="-1"></a>            fill<span class="op">=</span><span class="st">"none"</span></span>
<span id="cb7-11"><a aria-hidden="true" href="#cb7-11" tabindex="-1"></a>            stroke<span class="op">-</span>width<span class="op">=</span><span class="st">"2"</span></span>
<span id="cb7-12"><a aria-hidden="true" href="#cb7-12" tabindex="-1"></a>            stroke<span class="op">-</span>linecap<span class="op">=</span><span class="st">"round"</span></span>
<span id="cb7-13"><a aria-hidden="true" href="#cb7-13" tabindex="-1"></a>            stroke<span class="op">-</span>linejoin<span class="op">=</span><span class="st">"round"</span></span>
<span id="cb7-14"><a aria-hidden="true" href="#cb7-14" tabindex="-1"></a>            viewBox<span class="op">=</span><span class="st">"0 0 20 20"</span></span>
<span id="cb7-15"><a aria-hidden="true" href="#cb7-15" tabindex="-1"></a>            width<span class="op">=</span><span class="st">"50"</span></span>
<span id="cb7-16"><a aria-hidden="true" href="#cb7-16" tabindex="-1"></a>            height<span class="op">=</span><span class="st">"50"</span><span class="op">&gt;</span></span>
<span id="cb7-17"><a aria-hidden="true" href="#cb7-17" tabindex="-1"></a>            <span class="op">&lt;</span>polyline points<span class="op">=</span><span class="st">"15 4 10 16 5 11"</span><span class="op">&gt;&lt;/</span>polyline<span class="op">&gt;</span></span>
<span id="cb7-18"><a aria-hidden="true" href="#cb7-18" tabindex="-1"></a>        <span class="op">&lt;/</span>svg<span class="op">&gt;</span></span>
<span id="cb7-19"><a aria-hidden="true" href="#cb7-19" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb7-20"><a aria-hidden="true" href="#cb7-20" tabindex="-1"></a><span class="op">&lt;/</span>div<span class="op">&gt;</span></span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">And to make it reaaaally nice, define an animation for the <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">popping</code> class, which you may do in your <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">tailwind.css</code> file (not the built one). It will make sure your users feel the satisfaction of subscribing. :</p>
<div class="mb-4" id="cb8"><pre class="sourceCode css code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode css"><span id="cb8-1"><a aria-hidden="true" href="#cb8-1" tabindex="-1"></a><span class="fu">.popping</span> {</span>
<span id="cb8-2"><a aria-hidden="true" href="#cb8-2" tabindex="-1"></a>        <span class="kw">opacity</span><span class="ch">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb8-3"><a aria-hidden="true" href="#cb8-3" tabindex="-1"></a>        <span class="kw">animation</span><span class="ch">:</span> <span class="dv">fadeInScale 0.5</span><span class="dt">s</span> <span class="dv">forwards</span><span class="op">;</span></span>
<span id="cb8-4"><a aria-hidden="true" href="#cb8-4" tabindex="-1"></a>        <span class="kw">position</span><span class="ch">:</span> <span class="dv">absolute</span><span class="op">;</span> <span class="co">/* Ensure it's positioned relative to the parent */</span></span>
<span id="cb8-5"><a aria-hidden="true" href="#cb8-5" tabindex="-1"></a>        <span class="kw">left</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb8-6"><a aria-hidden="true" href="#cb8-6" tabindex="-1"></a>        <span class="kw">top</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb8-7"><a aria-hidden="true" href="#cb8-7" tabindex="-1"></a>}</span>
<span id="cb8-8"><a aria-hidden="true" href="#cb8-8" tabindex="-1"></a><span class="im">@keyframes</span> fadeInScale {</span>
<span id="cb8-9"><a aria-hidden="true" href="#cb8-9" tabindex="-1"></a>    <span class="dv">0%</span> {</span>
<span id="cb8-10"><a aria-hidden="true" href="#cb8-10" tabindex="-1"></a>        <span class="kw">opacity</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-11"><a aria-hidden="true" href="#cb8-11" tabindex="-1"></a>        <span class="kw">transform</span><span class="ch">:</span> <span class="fu">translate(</span><span class="dv">-500</span><span class="dt">%</span><span class="op">,</span> <span class="dv">-50</span><span class="dt">%</span><span class="fu">)</span> <span class="fu">scale(</span><span class="dv">1</span><span class="fu">)</span><span class="op">;</span> <span class="co">/* Start transparent on the left */</span></span>
<span id="cb8-12"><a aria-hidden="true" href="#cb8-12" tabindex="-1"></a>    }</span>
<span id="cb8-13"><a aria-hidden="true" href="#cb8-13" tabindex="-1"></a>    <span class="dv">100%</span> {</span>
<span id="cb8-14"><a aria-hidden="true" href="#cb8-14" tabindex="-1"></a>        <span class="kw">opacity</span><span class="ch">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb8-15"><a aria-hidden="true" href="#cb8-15" tabindex="-1"></a>        <span class="kw">transform</span><span class="ch">:</span> <span class="fu">translate(</span><span class="dv">-50</span><span class="dt">%</span><span class="op">,</span> <span class="dv">-50</span><span class="dt">%</span><span class="fu">)</span> <span class="fu">scale(</span><span class="dv">1</span><span class="fu">)</span><span class="op">;</span> <span class="co">/* End centered */</span></span>
<span id="cb8-16"><a aria-hidden="true" href="#cb8-16" tabindex="-1"></a>    }</span>
<span id="cb8-17"><a aria-hidden="true" href="#cb8-17" tabindex="-1"></a>}</span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
</section>
</section>
<section class="level3" id="a-successful-success-page-that-leads-to-success">
<h3 class="text-lg sm:text-2xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="a-successful-success-page-that-leads-to-success">A successful success page that leads to success :</h3>
<div class="demo-container">
    <iframe class="demo" id="demo1" src="https://thomasdargent.com/api/brevo_success_example" title="Basic responsive form showing a success animation if it was successful">
    </iframe>
    <div aria-hidden="true" class="resizer"></div>
</div>
</section>
</section>
<section class="level2" id="showing-the-user-errors">
<h2 class="text-2xl sm:text-3xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-600 dark:text-pink-400" data-anchor-id="showing-the-user-errors">Showing the user errors</h2>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">So HTML can swap an element on return, but what if we just want to add information to the same element ? Well, HTMX allows us to do that, using some plain old vanilla Js too !</p>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">First, let’s add a div to be filled with errors and sorrow, just like its author :</p>
<div class="mb-4" id="cb9"><pre class="sourceCode html code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode html"><span id="cb9-1"><a aria-hidden="true" href="#cb9-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"error-msg"</span><span class="ot"> class</span><span class="op">=</span><span class="st">"mb-4 border-pink-800 text-pink-800 shadow-pink-800 font-bold border-2 shadow-punk p-1 hidden"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb9-2"><a aria-hidden="true" href="#cb9-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span></span>
<span id="cb9-3"><a aria-hidden="true" href="#cb9-3" tabindex="-1"></a><span class="ot">    type</span><span class="op">=</span><span class="st">"submit"</span></span>
<span id="cb9-4"><a aria-hidden="true" href="#cb9-4" tabindex="-1"></a><span class="ot">    class</span><span class="op">=</span><span class="st">"block mx-auto text-pacific-blue-100 bg-pacific-blue-900 p-4 hover:scale-110 hover:shadow-md"</span><span class="dt">&gt;</span></span>
<span id="cb9-5"><a aria-hidden="true" href="#cb9-5" tabindex="-1"></a>Subscribe !</span>
<span id="cb9-6"><a aria-hidden="true" href="#cb9-6" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Ignore shadow-punk (just a cool custom shadow class I made). What matters here is the div being hidden initially.</p>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Then we can add our HTMX handling in our form :</p>
<div class="mb-4" id="cb10"><pre class="sourceCode html code-with-copy overflow-auto !max-w-[40rem] bg-gray-900 dark:bg-gray-1000 text-sm lg:text-base mb-8 p-2 py-4 shadow-gray-1000 dark:shadow-gray-700 shadow-punk border border-gray-900 dark:border-gray-700 mt-4" style=" --tw-prose-pre-code: null; --tw-prose-pre-bg: null;"><code class="sourceCode html"><span id="cb10-1"><a aria-hidden="true" href="#cb10-1" tabindex="-1"></a>hx-on:htmx:response-error="</span>
<span id="cb10-2"><a aria-hidden="true" href="#cb10-2" tabindex="-1"></a>              document.querySelector('#error-msg').classList.remove('hidden');</span>
<span id="cb10-3"><a aria-hidden="true" href="#cb10-3" tabindex="-1"></a>              document.querySelector('#error-msg').innerHTML = event.detail.xhr.responseText;"</span></code><button class="code-copy-button" title="Copy to Clipboard"><i class="bi"></i></button></pre></div>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Three things to note :</p>
<ul class="prose prose-stone dark:prose-invert !w-full max-w-[40em] mb-4 lg:max-w-[35em] marker:text-gray-700/60 dark:marker:text-gray-700/75 list-disc pl-8 lg:prose-lg">
<li><code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">hx-on</code> allows us to do custom js on a custom event reception.</li>
<li><code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">htmx:response-error</code> is triggered when the call returns an error (4** or 5**). The doc recommend using <code class="p-1 text-pink-700 dark:text-pacific-blue-500 shadow-inner text-nowrap">responseError</code> but I always get unreliable results with it. If you know more, email me !</li>
<li>We simply remove the hidden class to show the error div, and then inject the error message from the server’s response.</li>
</ul>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">And just like that, we got a working error message.</p>
<section class="level3" id="demonstrating-our-errors">
<h3 class="text-lg sm:text-2xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-900 dark:text-pink-600" data-anchor-id="demonstrating-our-errors">Demonstrating our errors :</h3>
<div class="demo-container">
    <iframe class="demo" id="demo2" src="https://thomasdargent.com/api/brevo_error_example" title="Our form now display errors returned by the server unerdneath the form">
    </iframe>
    <div aria-hidden="true" class="resizer"></div>
</div>
</section>
</section>
<section class="level2" id="conclusion">
<h2 class="text-2xl sm:text-3xl !w-full max-w-[40rem] mb-4 mt-8 font-bold text-pacific-blue-600 dark:text-pink-400" data-anchor-id="conclusion">Conclusion</h2>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">We’ve built a nice looking, modern form using HTMX, TailwindCSS, and Django. No more page reloads, and users get instant feedback thanks to HTMX. Whether it’s a smooth success message or a user-friendly error, everything happens seamlessly within the page.</p>
<p class="prose lg:prose-lg !w-full prose-stone  dark:prose-invert max-w-[40rem] mb-4">Next time, we’ll take things up a notch by adding Captcha for an extra layer of security. XOXO</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../js/iframe_demo.js"></script><script src="../js/ts/menu.ts"></script><script src="../js/switch_theme.js"></script></body></html>